# Postman Testing Suite - Moodle API Backend

This folder contains all Postman-related files for testing the Moodle API Backend.

## 📁 Contents

| File | Description |
|------|-------------|
| `Moodle_API_Backend.postman_collection.json` | Complete Postman collection with all API endpoints |
| `POSTMAN_DOCUMENTATION.md` | Comprehensive testing guide and troubleshooting |
| `setup-postman-testing.sh` | Automated setup script for Postman testing |
| `POSTMAN_FILES.md` | Overview of all Postman-related files |

## 🚀 Quick Start

### Option 1: Automated Setup
```bash
# From the moodle-api-backend directory
./postman/setup-postman-testing.sh
```

### Option 2: Manual Setup
1. Import `Moodle_API_Backend.postman_collection.json` into Postman
2. Follow instructions in `POSTMAN_DOCUMENTATION.md`
3. Set up environment variables as described

## 📋 Usage

### Running the Setup Script
The setup script can be run from either:
- The `moodle-api-backend` directory: `./postman/setup-postman-testing.sh`
- The `postman` directory: `./setup-postman-testing.sh`

### Importing the Collection
1. Open Postman
2. Click **Import**
3. Select **Upload Files**
4. Choose `Moodle_API_Backend.postman_collection.json`
5. Click **Import**

### Environment Variables
Set up these variables in Postman:
- `base_url`: `http://localhost:8000`
- `api_token`: Your API token (generated by setup script)
- `moodle_username`: Your Moodle username
- `moodle_password`: Your Moodle password
- `course_id`: Course ID for testing (default: `1`)

## 📚 Documentation

- **Complete Guide**: See `POSTMAN_DOCUMENTATION.md`
- **File Overview**: See `POSTMAN_FILES.md`
- **Setup Help**: Run the setup script

## 🧪 Testing Workflow

1. **Start Laravel Server**:
   ```bash
   php artisan serve
   ```

2. **Run Setup Script**:
   ```bash
   ./postman/setup-postman-testing.sh
   ```

3. **Import Collection** into Postman

4. **Set Environment Variables**

5. **Start Testing**:
   - Begin with "Test API Connection"
   - Continue with authenticated endpoints

## 🔗 Available Endpoints

### Authentication
- `GET /api/test` - Test API connection
- `GET /api/user` - Get authenticated user

### Moodle Account Management
- `POST /api/v1/moodle/auth/link` - Link Moodle account
- `POST /api/v1/moodle/auth/unlink` - Unlink Moodle account

### Course Management
- `GET /api/v1/moodle/courses/enrolled` - Get enrolled courses
- `GET /api/v1/moodle/courses/available` - Get available courses
- `POST /api/v1/moodle/courses/{id}/enroll` - Enroll in course

### Certificates
- `GET /api/v1/moodle/certificates` - Get user certificates

## 🛠️ Troubleshooting

### Common Issues
1. **Server not running**: Run `php artisan serve`
2. **Invalid token**: Run setup script to generate new token
3. **404 errors**: Check if routes are loaded correctly
4. **Moodle errors**: Verify Moodle credentials and server accessibility

### Debug Commands
```bash
# Check server status
curl http://localhost:8000/api/test

# Generate new token
php artisan tinker --execute="use App\Models\User; \$user = User::first(); \$token = \$user->createToken('test')->plainTextToken; echo \$token;"

# Check logs
tail -f storage/logs/laravel.log
```

## 📞 Support

- **Documentation**: See `POSTMAN_DOCUMENTATION.md`
- **Setup Help**: Run `./setup-postman-testing.sh`
- **Basic Testing**: Run `../test-api.sh` (from parent directory)
- **Laravel Logs**: Check `../storage/logs/laravel.log`

---

**Happy Testing! 🎉** 